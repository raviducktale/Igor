<section class="lead-add-list">
  <div class="container">
    <div class="row py-1">
      <div class="col-lg-3">
        <div class="card b mb-2">
          <div class="card-header bb">
            <h4 class="card-title">Lead detail</h4>
          </div>
          <table class="table">
            <tbody>
              <tr>
                <td>
                  <div class="text-right text-bold">
                    <input type="hidden" class="form-control" name="id" [(ngModel)]="selectedLead._id">
                    <input class="e-input" type="text" [(ngModel)]="selectedLead.name" />
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="text-right text-bold">
                    <input class="e-input" type="text" [(ngModel)]="selectedLead.description" />
                  </div>
                </td>
              </tr>
              <tr>
                
                <td>
                  <div class="text-right text-bold">
                    <input class="e-input" type="text" [(ngModel)]="selectedLead.date" />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="card-body">
              <a class="btn btn-primary btn-block" (click)="updateLead(selectedLead._id)">Update</a>
              <a class="btn btn-primary btn-block" [routerLink]="['/lead']">Back</a>
          </div>
        </div>
      </div>
      
      <div class="col-lg-9">
        <div class="container-md">
          <div class="card b mb-2">
            <div class="card-body bt mb-3">
              <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link" (click)="selectAction(ACTIONS?.Call)" id="call-tab" data-toggle="tab" href="#call" role="tab" aria-controls="call" aria-selected="true">Call</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" (click)="selectAction(ACTIONS?.Comment)" id="comment-tab" data-toggle="tab" href="#call" role="tab" aria-controls="comment" aria-selected="false">Comment</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" (click)="selectAction(ACTIONS?.Task)" id="task-tab" data-toggle="tab" href="#call" role="tab" aria-controls="task" aria-selected="false">Task</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" (click)="selectAction(ACTIONS?.Meeting)" id="meeting-tab" data-toggle="tab" href="#call" role="tab" aria-controls="meeting" aria-selected="false">Meeting</a>
                </li>
                <!--<li class="nav-item">
                  <a class="nav-link"  id="scheduler-tab" data-toggle="tab" href="#scheduler" role="tab" aria-controls="scheduler" aria-selected="false">Scheduler</a>
                </li>-->

              </ul>

              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show" id="call" role="tabpanel" aria-labelledby="call-tab" *ngIf="selectedAction!==undefined">
                  <div class="row">

                    <div class="col-12" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task " >
                      <div class="form-group">
                        <ejs-richtexteditor id='defaultRTE' [(value)]='value' [toolbarSettings]='tools' [quickToolbarSettings]='quickTools' [(ngModel)]="actionModel.Description"></ejs-richtexteditor>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task || selectedAction===ACTIONS?.Comment">
                      <div class="form-group">
                        <input class="e-input" required type="text" placeholder="Subject" [(ngModel)]="actionModel.Subject" />
                      </div>
                    </div>

                    <div class="col-12 col-sm-6"   *ngIf="selectedAction===ACTIONS?.Meeting" >
                      <div class="form-group">
                        <input class="e-input" type="text" placeholder="Location" [(ngModel)]="actionModel.Location"  />
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task || selectedAction===ACTIONS?.Comment">
                      <div class="form-group">
                        <ejs-multiselect id='multiselectelement' [dataSource]='ResponsiblePersondata' [fields]='ResponsiblePersonfields' placeholder="Responsible Person" [(ngModel)]="actionModel.ResponsiblePerson"></ejs-multiselect>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='priorities' [value]='value' [fields]='prioritiesfields' placeholder="Priority" [(ngModel)]="actionModel.Priority"></ejs-dropdownlist>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='types' [value]='value' [fields]='typesfields' placeholder="Types" [(ngModel)]="actionModel.Types"></ejs-dropdownlist>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-datetimepicker [(ngModel)]="actionModel.EventStartDate"  placeholder="Event Start Date"></ejs-datetimepicker>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6"  *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-datetimepicker [(ngModel)]="actionModel.EventEndDate" placeholder="Event End Date"></ejs-datetimepicker>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6">
                      <div class="form-group">
                        <input class="e-input" type="text" placeholder="Reminder Notification" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task" [(ngModel)]="actionModel.ReminderNotification" />
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='completes' [fields]='completesfields'  placeholder="Completed" [(ngModel)]="actionModel.Completed"></ejs-dropdownlist>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting  || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='repeattaskoptions' [value]='value' [fields]='repeattaskoptionsfields'  placeholder="Repeat Task" [(ngModel)]="actionModel.RepeatTask"></ejs-dropdownlist>
                      </div>
                    </div>

                    <!--<div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-numerictextbox value='0' format='###.##' [(ngModel)]="actionModel.Interval" ></ejs-numerictextbox>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-datetimepicker [(ngModel)]="actionModel.RepeatAfter" placeholder="Repeat After" ></ejs-datetimepicker>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='untills' [value]='value' [fields]='untillsfields'  placeholder="Untill" [(ngModel)]="actionModel.Untill"></ejs-dropdownlist>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-datetimepicker [(ngModel)]="actionModel.UntillDate"  placeholder="Untill Date"></ejs-datetimepicker>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-numerictextbox value='0' format='###.##'  [(ngModel)]="actionModel.UntillCompile"></ejs-numerictextbox>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting || selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-datetimepicker [(ngModel)]="actionModel.RemindUsing"  placeholder="Remind Using"></ejs-datetimepicker>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6" *ngIf="selectedAction===ACTIONS?.Call || selectedAction===ACTIONS?.Meeting|| selectedAction===ACTIONS?.Task">
                      <div class="form-group">
                        <ejs-dropdownlist id='ddlelement' [dataSource]='reminds' [value]='value' [fields]='remindsfields' placeholder="Remind To"  [(ngModel)]="actionModel.RemindTo"></ejs-dropdownlist>
                      </div>
                    </div>-->

                    <div class="col-12 col-sm-6">
                      <div class="form-group">
                        <button (click)="AddCall(actionModel)" *ngIf="selectedAction===ACTIONS?.Call" class="btn btn-sm btn-primary btn-block">Add Call</button>
                        <button (click)="AddMeeting(actionModel)" *ngIf="selectedAction===ACTIONS?.Meeting" class="btn btn-sm btn-primary btn-block">Add Meeting</button>
                        <button (click)="AddTask(actionModel)" *ngIf="selectedAction===ACTIONS?.Task" class="btn btn-sm btn-primary btn-block">Add Task</button>
                        <button (click)="AddComment(actionModel)" *ngIf="selectedAction===ACTIONS?.Comment" class="btn btn-sm btn-primary btn-block">Add Comment</button>

                      </div>
                     

                    </div>

                    <div class="col-12 col-sm-12" *ngIf="callVM?.createdDate">
                      <div class="form-group">
                        Created On : {{callVM?.createdDate | date : 'MMM d, y, h:mm:ss a'}}

                        <br />

                      </div>
                    </div>

                  </div>
                </div>

               
                <div class="tab-pane fade" id="scheduler" role="tabpanel" aria-labelledby="scheduler-tab">
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <!--<app-ejs-schedule [selectedDate]="selectedDate"
          [eventSettings]="eventSettings"
          [currentView]="currentView">

            </app-ejs-schedule>-->
                        <!--<ejs-schedule #schedule width='100%' height='500px'
                    [selectedDate]="selectedDate"
                    [eventSettings]="eventSettings"
                        (popupOpen)="onPopupOpen($event)"
                        (ActionBegin)="onActionBegin($event)"
                    [currentView]="currentView">
          </ejs-schedule>-->
                        <!--<ejs-schedule [ng-class]="form-group" width='100%' height='550px'
                        [enableLoadOnDemand]="true"
                        [currentView]="currentView"
                        [selectedDate]="selectedDate"
                        [showQuickInfo]="showQuickInfo"
                        [eventSettings]="eventSettings"
                        (popupOpen)="onPopupOpen($event)">
            <e-views>
                <e-view option="Day"></e-view>
                <e-view option="Week"></e-view>
                <e-view option="WorkWeek"></e-view>
                <e-view option="Month"></e-view>
            </e-views>
          </ejs-schedule>-->
                        <ejs-schedule width='100%' height='550px' timezone="UTC" [selectedDate]="selectedDate" [eventSettings]="eventSettings" [currentView]="currentView"></ejs-schedule>
                      </div>
                    </div>


                  </div>
                </div>
              </div>
              </div>
            </div>

            <!--<div class="report-list-table">
              <div class="row">
                <div class="col-12 text-center">

                  <div class="report-date"><h3><span>History</span></h3></div>
                  <div class="col-12 col-sm-12" *ngIf="historytabledata?.length">
                    <div class="form-group">
                      <table class="table">
                        <thead>
                          <tr>
                            <th>Action </th>
                            <th>Panel  </th>
                            <th>CreatedBy </th>
                            <th>CreatedDate </th>
                            <th>Button </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let dd of historytabledata">
                            <td>
                              <div>{{dd.Action}}</div>
                            </td>


                            <td>
                              <div>{{dd.Panel}}</div>
                            </td>


                            <td>
                              <div>{{dd.CreatedBy}}</div>
                            </td>
                            <td>
                              <div>{{dd.CreatedDate}}</div>
                            </td>
                            <td>
                              <div>{{dd.Button}}</div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>

                </div>
              </div>
        </div>-->

            <div class="row m-0">
              <div class="col-12">
                <ul class="timeline">

                  <ng-container *ngFor="let historydata of historytabledata;let i=index">
                    <!--<li class="timeline-separator">{{historydata?.CreatedDate}}</li>-->
                    <li [ngClass]="[(i%2) === 0 ? '' : 'timeline-inverted']" *ngIf="i<limit">
                      <div class="timeline-badge primary"><em [ngClass]="[historydata.Action === 'Call' ? 'fa fa-phone' : 'fa fa-user']"></em></div>
                      <div class="timeline-card">
                        <div [ngClass]="[(i%2) === 0 ? 'popover left' : 'popover right']">
                          <h4 class="popover-header">{{historydata?.Action}}</h4>
                          <div class="arrow"></div>
                          <div class="popover-body">
                            <p>
                              <br><small>User Added a {{historydata?.Action}} with {{historydata?.Subject}}</small>
                            </p>
                            <p>Created On: {{historydata?.CreatedDate | date: 'MM-dd-yyy hh:mm:ss'}}</p>
                          </div>
                        </div>
                      </div>
                    </li>
                    <br /> 
                  </ng-container>

                  <li class="timeline-end" *ngIf="limit !== historytabledata.length"><a class="timeline-badge" (click)="showAll(historytabledata.length)"><em class="fa fa-plus"></em></a></li>
                  <li class="timeline-end" *ngIf="limit == historytabledata.length"><a class="timeline-badge" (click)="showAll(4)"><em class="fa fa-minus"></em></a></li>



                  <!--<li  class="timeline-inverted">
      <div  class="timeline-badge warning"><em  class="fa fa-phone"></em></div>
      <div  class="timeline-card">
        <div  class="popover right">
          <h4  class="popover-header">Call</h4>
          <div  class="arrow"></div>
          <div  class="popover-body">
            <p >
              Michael <a  href="tel:+011654524578">(+011) 6545 24578 ext. 132</a>
              <br ><small >Pellentesque ut diam velit, eget porttitor risus. Nullam posuere euismod volutpat.</small>
            </p>
          </div>
        </div>
      </div>
    </li>


  <li  class="timeline-separator" data-datetime="Yesterday"></li>
  <li >
    <div  class="timeline-badge danger"><em  class="fas fa-video"></em></div>
    <div  class="timeline-card">
      <div  class="popover left">
        <h4  class="popover-header">Conference</h4>
        <div  class="arrow"></div>
        <div  class="popover-body">
          <p >Join development group</p><small ><a  href="skype:echo123?call"><em  class="fa fa-phone mr-2"></em>Call the Skype Echo</a></small>
        </div>
      </div>
    </div>
  </li>
  <li  class="timeline-inverted">
    <div  class="timeline-card">
      <div  class="popover right">
        <h4  class="popover-header">Appointment</h4>
        <div  class="arrow"></div>
        <div  class="popover-body">
          <p >Sed posuere consectetur est at lobortis. Aenean eu leo quam. Pellentesque ornare sem lacinia quam.</p>
          <div  class="btn-group" dropdown="">
            <a  class="dropdown-toggle" dropdowntoggle="" href="#" aria-haspopup="true"><em  class="fa fa-paperclip"></em></a>

          </div>
        </div>
      </div>
    </div>
  </li>
  <li >
    <div  class="timeline-badge info"><em  class="fa fa-plane"></em></div>
    <div  class="timeline-card">
      <div  class="popover left">
        <h4  class="popover-header">Fly</h4>
        <div  class="arrow"></div>
        <div  class="popover-body">
          <p >Sed posuere consectetur est at lobortis. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.</p>
        </div>
      </div>
    </div>
  </li>
  <li >
    <div  class="timeline-card">
      <div  class="popover left">
        <h4  class="popover-header">Appointment</h4>
        <div  class="arrow"></div>
        <div  class="popover-body">
          <p >Sed posuere consectetur est at lobortis. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.</p>
        </div>
      </div>
    </div>
  </li>
  <li  class="timeline-separator" data-datetime="2014-05-21"></li>
  <li  class="timeline-inverted">
    <div  class="timeline-badge success"><em  class="fa fa-music"></em></div>
    <div  class="timeline-card">
      <div  class="popover right">
        <h4  class="popover-header">Relax</h4>
        <div  class="arrow"></div>
        <div  class="popover-body">
          <p >Listen some music</p>
        </div>
      </div>
    </div>
  </li>-->



                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>
